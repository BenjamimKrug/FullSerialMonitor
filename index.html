<html>

<head>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="header" style="width:80%">
        <input type="text" id="sendInput" style="width:70%" disabled>
        <button id="sendButton" onclick="sendData()" disabled>Send</button>
        <select id="line_ending" style="width:120px" onchange="updatePreferences()" disabled>
            <option value="">No line ending</option>
            <option value='\n'>LF(New line)</option>
            <option value='\r'>CR(Carriage return)</option>
            <option value="\r\n">CR+LF(Carriage return + New line)</option>
        </select>
    </div>
    <div class="box terminal" id="terminal">
    </div>
    OUTPUT
    <br>
    <div class="box output" id="output">
    </div>

    <div id="config_menu" class="config_menu" style="display:none">
        Log file
        <br>
        <select id="log_type">
            <option value="none">None</option>
            <option value="w">Overwrite</option>
            <option value="a">Append</option>
        </select>
        <input type="checkbox" id="log_addTimestamp" />
        <label for="log_addTimestamp">Add Timestamp</label>
        <br>
        <input type="text" id="log_folder_input" class="file_path" />
        <input type="file" id="log_folder" style="display:none" onchange="readDirPaths(true, false)" webkitdirectory />
        <input type="button" value="Browse..." class="general_btn" style="right: 5px;" onclick="log_folder.click();" />
        <br><br>

        Exception decoder
        <br>
        <label>
            Arduino packages folder<br>
            <input type="text" id="decoder_folder_input" class="file_path" />
            <input type="file" id="decoder_folder" style="display:none" onchange="readDirPaths(false,true)"
                webkitdirectory />
            <input type="button" value="Browse..." class="general_btn" style="right: 5px;"  onclick="decoder_folder.click();" />
        </label>
        <br><br>

        Miscellaneous
        <br>
        <input type="checkbox" id="ctrlEnter" />
        <label for="ctrlEnter">Use Ctrl key to send</label>
        <br><br>

        Custom parsers
        <button id="addCustomParser" onclick="createCustomParserField()">+</button>
        <br>
        <div id="customParsersDiv" class="box customParsersDiv">
        </div>
        <button onclick="backupPreferences();config_menu.style.display = 'none'" class="general_btn close_btn"
            style="right: 150px;position: fixed;">
            Cancel
        </button>
        <button onclick="updatePreferences();config_menu.style.display = 'none'" class="general_btn close_btn"
            style="right: 10px;position: fixed;">
            Save and Close
        </button>
    </div>

    <div id="options_menu" class="options_menu">
        <button id="open_config_menu" class="general_btn" style="right:5px">
            <img src="./images/settings gear.png" width="12" height="12">
            Config
        </button>
        <br><br>
        <label for="autoScroll" class="label_left">autoScroll</label>
        <input type="checkbox" id="autoScroll" onchange="updatePreferences()" class="checkbox_options">
        <br>

        <label for="addTimestamp" class="label_left">Add Timestamp</label>
        <input type="checkbox" id="addTimestamp" class="checkbox_options"
            onchange="updatePreferences();changeTimestamp()">
        <br>

        <select id="comPorts" class="select_input">
        </select>
        <button id="listPorts" class="general_btn" style="right: 5px;" onclick="getPorts()">LIST</button>
        <br>

        <select id="baudrate_input" class="select_input">
            <option>4800</option>
            <option>9600</option>
            <option>19200</option>
            <option>38400</option>
            <option>57600</option>
            <option>115200</option>
            <option>230400</option>
            <option>460800</option>
            <option>500000</option>
            <option>921600</option>
            <option>1000000</option>
        </select>
        <label for="baudrate" style="position:absolute;right:25px;transform: translate(0, 10%);">bps</label>
        <br><br>
        <button id="connectSerial" class="options_button" onclick="connect()">
            <img src="./images/usb-connected-16.png" width="16" height="16">
            CONNECT
        </button>
        <br><br>
        <button id="disconnectSerial" class="options_button" onclick="disconnect()">
            <img src="./images/usb-disconnected-16.png" width="16" height="16">
            DISCONNECT
        </button><br><br>
        <button id="cleanTerminal" class="options_button" onclick="cleanTerminal()">
            <img src="./images/trash-2-16.png" width="16" height="16">
            CLEAN
        </button><br><br>

        ESP EXCEPTION DECODER
        <label for="decoderArch" style="position:relative;left:5%">Arch</label>
        <select id="decoderAch" class="select_input" style="right:5%">
            <option value="esp32">ESP32</option>
            <option value="esp8266">ESP8266</option>
        </select>
        <br>
        ELF File<br>
        <input type="text" id="elf_path_input" class="file_path" style="width:60%" />
        <input type="file" id="elf_path" style="display:none" onchange="getELF();" />
        <input type="button" value="Browse..." class="general_btn" onclick="elf_path.click();" />


        OUTPUT HISTORY
        <br>
        <div class="box output_history" id="output_history" style="width:90%">
        </div>
    </div>
    <script src="./renderer.js"></script>
    <script src="./preferences_handle.js"></script>
    <script src="./parsers.js"></script>
    <script src="./decoder.js"></script>
</body>

</html>